@using DigitalLearningSolutions.Web.ViewModels.LearningPortal
@model CurrentViewModel

<link rel="stylesheet" href="@Url.Content("~/css/learningPortal/coursesShared.css")" asp-append-version="true">
<link rel="stylesheet" href="@Url.Content("~/css/learningPortal/current.css")" asp-append-version="true">

@{
  ViewData["Title"] = "Learning Portal - Current";
}

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">
    <h1 id="page-heading">My Current Courses</h1>
    <h2 class="page-subheading">@Model.BannerText</h2>
    <form method="get" role="search">
      <div class="nhsuk-grid-row sort-and-search">
        <partial name="Current/_CurrentCourseSearch" model="Model" />
        <partial name="Current/_CurrentCourseSort" model="Model" />
      </div>
    </form>
    <hr class="nhsuk-u-margin-top-3 nhsuk-u-margin-bottom-0" />
    @if (!Model.CurrentCourses.Any())
    {
      <p class="nhsuk-u-margin-top-4" role="alert">
        <b>No data to display</b>
      </p>
    }
    else
    {
      <p class="nhsuk-u-margin-top-4 nhsuk-u-margin-bottom-0">
        @if (@Model.SearchString == null)
        {
          <span hidden aria-hidden="true" aria-live="polite" id="results-count">0 matching results</span>
        }
        else
        {
          <span role="alert" id="results-count">@Model.CurrentCourses.Count() matching @(Model.CurrentCourses.Count() == 1 ? "result" : "results")</span>
        }
      </p>

      <div id="current-course-cards">
        @foreach (var currentCourse in Model.CurrentCourses)
        {
          <partial name="Current/CurrentCourseCard/_CurrentCourseCard" model="currentCourse" />
        }
      </div>
    }

  </div>
</div>

@section scripts {
  <script src="@Url.Content("~/js/learningPortal/searchCourses.js")" asp-append-version="true"></script>
  <script src="@Url.Content("~/js/learningPortal/sortCourses.js")" asp-append-version="true"></script>
}
