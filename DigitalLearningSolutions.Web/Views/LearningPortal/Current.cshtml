@using DigitalLearningSolutions.Web.ViewModels.LearningPortal
@model CurrentViewModel

<link rel="stylesheet" href="@Url.Content("~/css/learningPortal/current.css")">

@{
  ViewData["Title"] = "Learning Portal - Current";
}

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">
    <h1>My Current Courses</h1>
    <h2 class="page-subheading">@Model.BannerText</h2>

    <partial name="_CurrentCourseSearch" model="Model" />
    <partial name="_CurrentCourseSort" model="Model" />
    <hr class="nhsuk-u-margin-top-3 nhsuk-u-margin-bottom-0" />
    @if (!Model.CurrentCourses.Any())
    {
      <p role="alert">No data to display</p>
    }
    else
    {
      <p class="nhsuk-u-margin-top-4 nhsuk-u-margin-bottom-0">
        @if (@Model.SearchString == null)
        {
          <span hidden aria-hidden="true" aria-live="polite" id="results-count">0 matching results</span>
        }
        else
        {
          <span role="alert" id="results-count">@Model.CurrentCourses.Count() matching results</span>
        }
      </p>

      @if (Model.SelfAssessment != null)
      {
        <div class="nhsuk-panel nhsuk-u-margin-top-3 nhsuk-u-margin-bottom-3">
          <h4>@Model.SelfAssessment.Name</h4>
          <div class="nhsuk-grid-row">
              <div class="nhsuk-grid-column-full">
                <a class="nhsuk-button nhsuk-u-margin-bottom-0" href="">
                  Launch self assessment
                </a>
              </div>
            </div>
        </div>
      }

      <div id="current-course-cards">
        @foreach (var currentCourse in Model.CurrentCourses)
        {
          <partial name="CurrentCourseCard/_CurrentCourseCard" model="currentCourse" />
        }
      </div>
    }

  </div>
</div>

@section scripts {
  <script src="@Url.Content("~/js/learningPortal/searchCourses.js")"></script>
}
