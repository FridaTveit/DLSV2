@using DigitalLearningSolutions.Web.ViewModels.LearningPortal
@using DigitalLearningSolutions.Web.ViewModels.LearningPortal.SelfAssessments.FilteredMgp
@model SelfAssessmentFilteredResultsViewModel

@{
  Layout = "SelfAssessments/_Layout";
  ViewData["Title"] = "Filtered Results";
  ViewData["SelfAssessmentTitle"] = "Recommended Learning Resources";
}
@section breadcrumbs {
  <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" asp-action="SelfAssessmentReview" asp-route-selfAssessmentId="@(ViewContext.RouteData.Values["selfAssessmentId"])">Self Assessment</a></li>
  <li class="nhsuk-breadcrumb__item">Recommended Learning Resources</li>
}
<link rel="stylesheet" href="@Url.Content("~/css/learningPortal/selfAssessment.css")" asp-append-version="true">
<link rel="stylesheet" href="@Url.Content("~/css/learningPortal/coursesShared.css")" asp-append-version="true">
<style>
  .playlist-title {
    min-height: 72px;
  }
</style>
<div class="nhsuk-back-link">
  <a class="nhsuk-back-link__link nhsuk-u-margin-right-2" asp-action="SelfAssessmentReview" asp-route-selfAssessmentId="@(ViewContext.RouteData.Values["selfAssessmentId"])">
    <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
    </svg>
    Back to Self Assessment
  </a>

</div>
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">
    @if (Model.FavouritePlayList.Id != null)
    {
      <h1 id="page-heading">Favourites</h1>
      <partial name="_Playlist" model="Model.FavouritePlayList" />
    }
    @if (Model.RecommendedPlayLists.Any())
    {
      <h1 id="page-heading">Recommendations</h1>
      @foreach (var playList in Model.RecommendedPlayLists)
      {
        @if (playList.Name != null)
        {
          <partial name="_Playlist.cshtml" model="playList" />
        }

      }
    }
    @if (Model.CompetencyPlayLists.Any())
    {
      <h1 id="page-heading">Explore more</h1>
      <div class="nhsuk-grid-row">
        @foreach (var playList in Model.CompetencyPlayLists)
        {
          <div class="nhsuk-grid-column-one-half card-container">
            <div class="course-card nhsuk-panel" id="@playList.Id-card">
              <h3 class="playlist-title nhsuk-u-padding-top-2 nhsuk-u-margin-bottom-2" id="@playList.Name-name" name="name" role="heading" aria-level="3">
                @playList.Name
              </h3>
              <div class="nhsuk-action-link">
                <a class="nhsuk-action-link__link" aria-describedby="@playList.Name-name" asp-route-selfAssessmentId="@Model.SelfAssessment.Id" asp-route-playListId="@playList.Id" asp-action="FilteredCompetencyPlaylist">
                  <svg class="nhsuk-icon nhsuk-icon__arrow-right-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"></path>
                  </svg>
                  <span class="nhsuk-action-link__text">Explore</span>
                </a>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
